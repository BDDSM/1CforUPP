Перем НеВосстанавливатьНастройку;

Процедура КнопкаОКНажатие(Кнопка)
		Закрыть(Истина);
	КонецПроцедуры
	
Процедура УправлениеДиалогом()	
		ВидОтчета = ?(ВидОтчета = 0, 1, ВидОтчета);
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	УправлениеДиалогом();
   	ЗаполнитьНачальныеНастройки()
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	Если РегламентированнаяОтчетность.ИДКонфигурации() <> "БП" Тогда
		// Проверка ведения однофирменности
		УчетПоВсемОрганизациям = Истина;
	КонецЕсли;
	
	БухгалтерскиеОтчеты.ПоддержкаОднофирменностиДляФормыНастроекБухОтчетов(ЭтаФорма, УчетПоВсемОрганизациям);
    
КонецПроцедуры

Процедура ОбновлениеОтображения()
		УправлениеДиалогом();

КонецПроцедуры

Процедура ПереключательПриИзменении(Элемент)
	
		ЗаполнитьНачальныеНастройки(Истина);
КонецПроцедуры

Процедура КнопкаНастройкаПериодаНажатие(Элемент)
			Если НП.Редактировать() Тогда

		ДатаНач = НП.ПолучитьДатуНачала();
		ДатаКон = НП.ПолучитьДатуОкончания();

	КонецЕсли;

	КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ ОБЩЕГО НАЗНАЧЕНИЯ
// Формирует структуру, в которую складываются настройки
//
Функция СформироватьСтруктуруДляСохраненияНастроек()
	
	СтруктураНастроек = Новый Структура;
	СтруктураНастроек.Вставить("НастройкиПостроителя", ПостроительОтчета.ПолучитьНастройки());
	
	Возврат СтруктураНастроек;
	
КонецФункции // СформироватьСтруктуруДляСохраненияНастроек()

// Заполняет настройки из структуры - кроме состояния панели "Отбор"
//
Процедура ВосстановитьНастройкиИзСтруктуры(СтруктураСНастройками) Экспорт

	ПостроительОтчета.УстановитьНастройки(СтруктураСНастройками.НастройкиПостроителя);
	
КонецПроцедуры // ВосстановитьНастройкиИзСтруктуры()

// Процедура - обработчик события перед сохранением значений формы
//
Процедура ПередСохранениемЗначений(Отказ)
	
	СохраненныеНастройки = СформироватьСтруктуруДляСохраненияНастроек();
	
КонецПроцедуры // ПередСохранениемЗначений()

// Процедура - обработчик события после восстановления значений формы
//
Процедура ПослеВосстановленияЗначений()
	
	Если ТипЗнч(СохраненныеНастройки) = Тип("Структура") Тогда
		
		ВосстановитьНастройкиИзСтруктуры(СохраненныеНастройки);
		
	КонецЕсли;
	
КонецПроцедуры // ПослеВосстановленияЗначений()