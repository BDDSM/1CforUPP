Процедура КоманднаяПанель1Ок(Кнопка)
	ВозврСтруктура = Новый Структура;
	ВозврСтруктура.Вставить("ДатаОкончанияМежрасчетногоПериода", ДатаОкончанияМежрасчетногоПериода);
	ВозврСтруктура.Вставить("СписокФизЛиц", ТаблицаСотрудников);
	Закрыть(ВозврСтруктура);
КонецПроцедуры

Процедура КоманднаяПанель2Подбор(Кнопка)
	ПроцедурыУправленияПерсоналом.ОткрытьФормуВыбораСотрудникаОрганизации(ЭлементыФормы.ТаблицаСотрудников, ЭтаФорма, Ложь, ДатаОкончанияМежрасчетногоПериода, мГоловнаяОрганизация, 1,,,, Истина);
КонецПроцедуры

Процедура ТаблицаСотрудниковОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
		
	Если ТипЗнч(ВыбранноеЗначение) <> Тип("СправочникСсылка.ФизическиеЛица") Тогда
		Возврат;
	КонецЕсли;
	
	СтандартнаяОбработка = Ложь;
	Физлицо = ВыбранноеЗначение;
	
	Если ТаблицаСотрудников.НайтиПоЗначению(ФизЛицо) = Неопределено Тогда
		ТаблицаСотрудников.Добавить(ФизЛицо, ФизЛицо);
	КонецЕсли;

КонецПроцедуры

Процедура ТаблицаСотрудниковПриОкончанииРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования)
	
	Если НЕ ЗначениеЗаполнено(Элемент.ТекущиеДанные.Значение) Тогда
		ТаблицаСотрудников.Удалить(Элемент.ТекущиеДанные);
		Возврат;
	КонецЕсли;
	
	Для Каждого ТекущийЭлементСписка Из ТаблицаСотрудников Цикл
		Если ТекущийЭлементСписка.Значение = Элемент.ТекущиеДанные.Значение
			И ТекущийЭлементСписка <> Элемент.ТекущиеДанные Тогда
			ОтменаРедактирования = Истина;
			ТаблицаСотрудников.Удалить(Элемент.ТекущиеДанные);
			Предупреждение("Данный сотрудник уже присутствует в списке");
			Прервать;
		КонецЕсли;
	КонецЦикла;
КонецПроцедуры