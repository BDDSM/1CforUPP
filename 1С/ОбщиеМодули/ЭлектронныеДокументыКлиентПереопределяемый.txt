////////////////////////////////////////////////////////////////////////////////
// ЭлектронныеДокументыКлиентПереопределяемый: механизм обмена электронными документами.
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// ПРОГРАММНЫЙ ИНТЕРФЕЙС

// Находит элемент номенклатуры поставщика и открывает форму просмотра
//
// Параметры:
//  Идентификатор - уникальный идентификатор объекта
//
Процедура ОткрытьЭлементНоменклатурыПоставщика(Идентификатор) Экспорт
	
КонецПроцедуры

// Переопределяет сообщение о нехватке прав доступа
//
// Параметры:
//  ТекстСообщения - строка сообщения
//
Процедура ПодготовитьТекстСообщенияОНарушенииПравДоступа(ТекстСообщения) Экспорт
	
	// При необходимости можно переопределить или дополнить текст сообщения
	
КонецПроцедуры

// Производит заполнение реквизитов формы переданными значениями 
//
// Параметры:
//  Источник - Управляемая форма
//  ЗначениеЗаполнения - ссылка на хранилище
//
Процедура ЗаполнитьИсточник(Источник, ЗначениеЗаполнения) Экспорт
	
	Источник.ЗаполнитьТоварыИзВременногоХранилищаСервер(ЗначениеЗаполнения);
	Источник.ОбновитьОтображениеДанных();
	
конецПроцедуры

// Производит заполнение реквизитов формы переданными значениями 
//
// Параметры:
//  Источник - Управляемая форма
//  ЗначениеЗаполнения - ссылка на хранилище
//
Процедура ОткрытьФормуВыбораПользователей(ЭтаФорма) Экспорт
		
	Параметры = Новый Структура("Ключ", ЭтаФорма.Объект.Пользователь);
	Параметры.Вставить("РежимВыбора",             Истина);
	Параметры.Вставить("ТекущаяСтрока",           ЭтаФорма.Объект.Пользователь);
	Параметры.Вставить("ВыборГруппПользователей", Ложь);
	ОткрытьФорму("Справочник.Пользователи.ФормаВыбора", Параметры, ЭтаФорма);
		
КонецПроцедуры

// Возвращает адрес хранилища с таблицей значений - каталога товаров
//
// Параметры:
//  ИдентификаторФормы - уникальный  идентификатор формы, вызвавшей функцию
//
Функция АдресХранилищаКаталогаТоваров(ИдентификаторФормы) Экспорт
	
	Возврат Неопределено;
	
КонецФункции


// Проверяет на модифицированность объект в случае обычного приложения.
//
// Параметры:
//  Объект - объекта, модифицированность которого надо проверить;
//  Форма - форма объекта, модифицированность которого надо проверить.
//  Результат - Булево - результат проверки модифицированности формы объекта.
//
Процедура ОбъектМодифицирован(Объект, Форма, Результат) Экспорт
	
#Если ТолстыйКлиентОбычноеПриложение Тогда
	Результат = Ложь;
	
	Если Форма.Модифицированность ИЛИ НЕ ЗначениеЗаполнено(Объект.Ссылка) Тогда
		
		Результат = Истина;
		
		Если Объект.Метаданные().Проведение = Метаданные.СвойстваОбъектов.Проведение.Разрешить И НЕ Объект.Проведен Тогда
			Текст = НСтр("ru = 'Перед формированием ЭД документ необходимо провести.'");
		Иначе
			Текст = НСтр("ru = 'Перед формированием ЭД документ необходимо записать.'");
		КонецЕсли;
		
		ОбщегоНазначения.СообщитьИнформациюПользователю(Текст);
		
	КонецЕсли;
#КонецЕсли

КонецПроцедуры

// Проверяет на использование в прикладном решении библиотеки интернет поддержки пользователей.
//
// Параметры:
//  Использование - булево - признак использования библиотеки МПП..
//
Процедура ПроверитьИспользованиеИнтернетПоддержкаПользователей(Использование) Экспорт
	
	#Если ТолстыйКлиентОбычноеПриложение Тогда
		Использование = Истина;
	#КонецЕсли
	
КонецПроцедуры

// Вспомогательная процедура для запуска метода из библиотеки интернет поддержки пользователей.
//
Процедура СтартоватьМеханизмРаботыСОператоромЭДО(СертификатАбонента, Организация, ВариантБизнесПроцесса, ИдентификаторОрганизации = "") Экспорт
	
	// ИнтернетПоддержкаПользователей
	// Процесс старта диалога получения идентификатора
	#Если ТолстыйКлиентОбычноеПриложение Тогда
		ИнтернетПоддержкаПользователейКлиент.СтартоватьМеханизмРаботыСОператоромЭДО(
			СертификатАбонента, 
			Организация,
			ВариантБизнесПроцесса,
			ИдентификаторОрганизации);
	#КонецЕсли
	// Конец ИнтернетПоддержкаПользователей
	
КонецПроцедуры