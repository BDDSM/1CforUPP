Процедура ПоКнопкеОК(Кнопка)
	
    мСтруктураНеиспользуемыеЗначения = Новый Структура;
    СтруктураПараметров = НачальноеЗначениеВыбора;
	
	СтруктураПараметров.Свойство("СтруктураНеиспользуемыеЗначения", мСтруктураНеиспользуемыеЗначения);
	

	Если ЭлементыФормы.ВыбранныеПоля.ТекущаяСтрока <> Неопределено Тогда

        // Проверим, чтобы не выбирали то, что уже есть
		Если мСтруктураНеиспользуемыеЗначения.Свойство(ЭлементыФормы.ВыбранныеПоля.ТекущаяСтрока.Имя) Тогда
			Предупреждение("Это значение уже есть в списке!");
			Возврат;
		КонецЕсли;

		ОповеститьОВыборе(ЭлементыФормы.ВыбранныеПоля.ТекущиеДанные);

	КонецЕсли;
	
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)

	ПостроительОтчета=мПостроительОтчета;

КонецПроцедуры

Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	
    СтандартнаяОбработка=Ложь;
	
КонецПроцедуры

Процедура ВыбранныеПоляВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)
	
	мСтруктураНеиспользуемыеЗначения = Новый Структура;
    СтруктураПараметров = НачальноеЗначениеВыбора;
	
	СтруктураПараметров.Свойство("СтруктураНеиспользуемыеЗначения", мСтруктураНеиспользуемыеЗначения);	

	Если ВыбраннаяСтрока <> Неопределено Тогда
		
		Если ЭлементыФормы.ВыбранныеПоля.ТекущаяСтрока.Имя="Период" Тогда
			
			Предупреждение("Поле ""Период"" не может использоваться 
			|при распределении по измерениям бюджетирования!");
			
			Возврат;
		КонецЕсли;	
		
		// Проверим, чтобы не выбирали то, что уже есть
		Если мСтруктураНеиспользуемыеЗначения.Свойство(ЭлементыФормы.ВыбранныеПоля.ТекущаяСтрока.Имя) Тогда
			Предупреждение("Это значение уже есть в списке!");
			Возврат;
		КонецЕсли;
		
		ОповеститьОВыборе(ВыбраннаяСтрока);
		
	КонецЕсли;
	
КонецПроцедуры