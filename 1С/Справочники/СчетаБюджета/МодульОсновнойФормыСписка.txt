// <Описание процедуры>
//
// Параметры
//  <Параметр1>  – <Тип.Вид> – <описание параметра>
//                 <продолжение описания параметра>
//  <Параметр2>  – <Тип.Вид> – <описание параметра>
//                 <продолжение описания параметра>
//
Процедура ИзменитьКодЭлемента(Направление)

	СортировкаПоКоду = Истина;

	Если Порядок.Количество() = 0 Тогда
		СортировкаПоКоду = Ложь;
	ИначеЕсли Порядок.Получить(0).Представление <> "Код" Тогда
		СортировкаПоКоду = Ложь;
	КонецЕсли;

	Если Не СортировкаПоКоду Тогда
		Предупреждение("Для изменения порядка следования 
						|необходимо установить сортировку по коду.");

		Если Вопрос("Установить сортировку по коду?", РежимДиалогаВопрос.ДаНетОтмена, , КодВозвратаДиалога.Да) = КодВозвратаДиалога.Да Тогда
			Порядок.Установить("Код");
		КонецЕсли;

		Возврат;
	КонецЕсли;

	НаправлСорт = Порядок.Получить(0).Направление;

	Если НаправлСорт = НаправлениеСортировки.Возр Тогда
		Направление = Направление * (-1);
	КонецЕсли;

	ТекСтрока = ЭлементыФормы.СправочникСписок.ТекущаяСтрока;
	Если ТекСтрока <> Неопределено Тогда
		ТекОбъект = ЭлементыФормы.СправочникСписок.ТекущаяСтрока.ПолучитьОбъект();
		ТекОбъект.ИзменитьКод(Направление);
	КонецЕсли;

КонецПроцедуры // ИзменитьКодЭлемента()

Процедура ДействияФормыРедактироватьКод(Кнопка)
	МеханизмНумерацииОбъектов.ИзменениеВозможностиРедактированияНомера(Метаданные.Справочники.СчетаБюджета, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);
КонецПроцедуры
// Процедура - обработчик события "Действие" кнопки 
// КоманднаяПанельПереместитьВверх командной панели формы.
//
Процедура ДействияФормыКоманднаяПанельПереместитьВверх(Кнопка)

	ИзменитьКодЭлемента(-1);

КонецПроцедуры // ДействияФормыКоманднаяПанельПереместитьВверх()

// Процедура - обработчик события "Действие" кнопки 
// КоманднаяПанельПереместитьВниз командной панели формы.
//
Процедура ДействияФормыКоманднаяПанельПереместитьВниз(Кнопка)

	ИзменитьКодЭлемента(1);

КонецПроцедуры // ДействияФормыКоманднаяПанельПереместитьВниз()

Процедура СправочникСписокСтатьяБалансаПриИзменении(Элемент)
	
	ЭлементыФормы.СправочникСписок.ТекущиеДанные.Наименование=Элемент.Значение.Наименование;
	
	Если ЭлементыФормы.СправочникСписок.ТекущиеДанные.Знак=0 Тогда
		ЭлементыФормы.СправочникСписок.ТекущиеДанные.Знак=1;
	КонецЕсли;
	
КонецПроцедуры


////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

// Обработчик события ПриОткрытии Формы.
//
Процедура ПриОткрытии()

	МеханизмНумерацииОбъектов.ДобавитьВМенюДействияКнопкуРедактированияКода(ЭлементыФормы.ДействияФормы.Кнопки.Подменю);
	МеханизмНумерацииОбъектов.УстановитьДоступностьПоляВводаНомера(Метаданные.Справочники.СчетаБюджета, ЭлементыФормы.СправочникСписок, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.СправочникСписок.Колонки.Код);
КонецПроцедуры //ПриОткрытии

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	Если  ПараметрОтборПоВладельцу=Неопределено Тогда
		
		Сообщить("Справочник относится к подсистеме ""Бюджетирование"" и не предназначен для открытия из меню ""Операции"".",СтатусСообщения.Внимание);
		Отказ=Истина;
		
	КонецЕсли;
	
КонецПроцедуры