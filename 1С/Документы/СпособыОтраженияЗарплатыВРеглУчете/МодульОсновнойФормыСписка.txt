////////////////////////////////////////////////////////////////////////////////
// ПЕРЕМЕННЫЕ МОДУЛЯ

Перем мСведенияОСчетах;  // для получения сведений о счетах на время работы формы
Перем мСведенияОСтатьяхЗатрат;  // для получения сведений о статьях затрат на время работы формы

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ТАБЛИЧНОГО ПОЛЯ СправочникСписок

Процедура СправочникСписокПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	Если ДанныеСтроки.ЭтоГруппа Тогда
		
		СведенияОСчете = Новый Структура("КоличествоСубконто",0);
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "Дт", СведенияОСчете);
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "ДтНУ", СведенияОСчете);	
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "Кт", СведенияОСчете);	
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "КтНУ", СведенияОСчете);
		
	Иначе 
		СведенияОСчете = БухгалтерскийУчетДополнительный.ПолучитьСведенияОСчете(мСведенияОСчетах, ДанныеСтроки.СчетДт);
		СведенияОСтатьеЗатрат = БухгалтерскийУчет.ПолучитьСведенияОСтатьеЗатратПоСтроке(мСведенияОСтатьяхЗатрат, "Дт", ДанныеСтроки);
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "Дт", СведенияОСчете, ?(СведенияОСтатьеЗатрат = Неопределено,Новый Структура("ХарактерЗатрат",Неопределено),СведенияОСтатьеЗатрат));
		
		СведенияОСчете = БухгалтерскийУчетДополнительный.ПолучитьСведенияОСчете(мСведенияОСчетах, ДанныеСтроки.СчетДтНУ);
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "ДтНУ", СведенияОСчете);	
		
		СведенияОСчете = БухгалтерскийУчетДополнительный.ПолучитьСведенияОСчете(мСведенияОСчетах, ДанныеСтроки.СчетКт);
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "Кт", СведенияОСчете);	
		
		СведенияОСчете = БухгалтерскийУчетДополнительный.ПолучитьСведенияОСчете(мСведенияОСчетах, ДанныеСтроки.СчетКтНУ);
		БухгалтерскийУчет.НазначитьВидимостьСубконто(ОформлениеСтроки, "КтНУ", СведенияОСчете);
	КонецЕсли;

КонецПроцедуры

мСведенияОСчетах = Новый Соответствие;
мСведенияОСтатьяхЗатрат = Новый Соответствие;

СправочникСписок.Колонки.Добавить("СчетДт");
СправочникСписок.Колонки.Добавить("СчетДтНУ");
СправочникСписок.Колонки.Добавить("СчетКт");
СправочникСписок.Колонки.Добавить("СчетКтНУ");
СправочникСписок.Колонки.Добавить("СубконтоДт1");
СправочникСписок.Колонки.Добавить("СубконтоДт2");
СправочникСписок.Колонки.Добавить("СубконтоДт3");