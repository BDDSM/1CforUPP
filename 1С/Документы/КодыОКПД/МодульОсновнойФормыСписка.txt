Перем ПроверкаЗаполненияНеВыполнена;

Процедура ДействияФормыЗагрузка(Кнопка)
	
	ФормаЗагрузки = Справочники.КодыОКПД.ПолучитьФорму("ФормаЗагрузкаИзФайла");
	ФормаЗагрузки.ОткрытьМодально();
	
КонецПроцедуры

Процедура ПроверитьЗаполнениеСправочникаОКПД()

	Запрос = Новый Запрос("ВЫБРАТЬ ПЕРВЫЕ 1 Ссылка ИЗ Справочник.КодыОКПД");
	
	Если Запрос.Выполнить().Пустой() Тогда
		
		КнопкиСписок = Новый СписокЗначений;
		КнопкиСписок.Добавить("ДаК", "Да, из конфигурации");
		КнопкиСписок.Добавить("ДаФ", "Да, из файла");
		КнопкиСписок.Добавить("Нет", "Нет");
		
		ТекстВопроса = "Справочник ОКПД пуст.
					   |
					   |Вы можете выбрать для загрузки классификатор, встроенный в конфигурацию,
					   |или внешний текстовый файл, содержащий данные классификатора ОКПД.
					   |
					   |Хотите произвести загрузку классификатора ОКПД?";
		
		ОтветНаВопрос = Вопрос(ТекстВопроса, КнопкиСписок, 30,,, "Нет");
		
		Если (ОтветНаВопрос = "ДаК") ИЛИ (ОтветНаВопрос = "ДаФ") Тогда
			
			ФормаЗагрузки = Справочники.КодыОКПД.ПолучитьФорму("ФормаЗагрузкаИзФайла");
			
			Если ОтветНаВопрос = "ДаК" Тогда
				ФормаЗагрузки.НачальноеЗначениеВыбора = "ЗагрузитьИзМакета";
			КонецЕсли; 
			
			ФормаЗагрузки.ОткрытьМодально();
			
		КонецЕсли;
		
	КонецЕсли;

	ПроверкаЗаполненияНеВыполнена = Ложь;
	
КонецПроцедуры

Процедура СправочникДеревоПриПолученииДанных(Элемент, ОформленияСтрок)
	
	Если ПроверкаЗаполненияНеВыполнена Тогда
	
		ПроверитьЗаполнениеСправочникаОКПД();
	
	КонецЕсли; 
	
КонецПроцедуры

ПроверкаЗаполненияНеВыполнена = Истина;