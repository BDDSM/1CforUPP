Процедура УстановитьЗаголовкиОрганизацийВФорме()
	
	ЭлементыФормы.ДокументСписок.Колонки.Организация.ТекстШапки = ОбщегоНазначения.ПреобразоватьСтрокуИнтерфейса("Организация");
	ЭтаФорма.Заголовок = ОбщегоНазначения.ПреобразоватьСтрокуИнтерфейса("Отпуска организации");
	ЭлементыФормы.ОрганизацияФлаг.Заголовок = ОбщегоНазначения.ПреобразоватьСтрокуИнтерфейса("Организация:");

КонецПроцедуры // УстановитьЗаголовкиОрганизацийВФорме()

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ДЕЙСТВИЯ КОМАНДНЫХ ПАНЕЛЕЙ ФОРМЫ

Процедура ДействияФормыДокументыНачисления(Кнопка)
	
	Если ЭлементыФормы.ДокументСписок.ТекущаяСтрока = Неопределено Тогда
		Возврат;
	КонецЕсли;

	ТекущийДокумент = ЭлементыФормы.ДокументСписок.ТекущиеДанные.Ссылка;
	Обработка = Обработки.АнализНеявок.Создать();
	Обработка.Организация = ЭлементыФормы.ДокументСписок.ТекущиеДанные.Организация;
	Обработка.ОтбиратьСобытияПоДокументу = Истина;
	Обработка.ТипДокумента = ТекущийДокумент.Метаданные().Синоним;
	Обработка.КадровыйДокументОтбора = ТекущийДокумент;
	Обработка.Автозаполнение();
	Обработка.ПолучитьФорму().Открыть();
	
КонецПроцедуры

// Процедура вызывается при выборе пункта подменю "Движения документа по регистрам" меню "Перейти".
// командной панели формы. Процедура отрабатывает печать движений документа по регистрам.
//
Процедура ДействияФормыДвиженияДокументаПоРегистрам(Кнопка)

	Если ЭлементыФормы.ДокументСписок.ТекущаяСтрока = Неопределено Тогда
		Возврат;
	КонецЕсли;

	РаботаСДиалогами.НапечататьДвиженияДокумента(ЭлементыФормы.ДокументСписок.ТекущиеДанные.Ссылка);

КонецПроцедуры // ДействияФормыДвиженияДокументаПоРегистрам()

// Процедура вызывается при выборе пункта подменю "Структура подчиненности" меню "Перейти"
//
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	Если ЭлементыФормы.ДокументСписок.ТекущиеДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	РаботаСДиалогами.ПоказатьСтруктуруПодчиненностиДокумента(ЭлементыФормы.ДокументСписок.ТекущиеДанные.Ссылка);
	
КонецПроцедуры // ДействияФормыСтруктураПодчиненностиДокумента()

// Процедура вызывается при нажатии кнопки "Печать" командной панели формы,
// вызывает печать по умолчанию для формы документа.
//
Процедура ДействияФормыДействиеПечать(Кнопка)

	Если ЭлементыФормы.ДокументСписок.ТекущаяСтрока <> Неопределено Тогда

		Попытка
			УниверсальныеМеханизмы.НапечататьДокументИзФормыСписка(ЭлементыФормы.ДокументСписок.ТекущаяСтрока.ПолучитьОбъект())
		Исключение
		КонецПопытки
			
	КонецЕсли;

КонецПроцедуры // ОсновныеДействияФормыДействиеПечать()

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

Процедура ПриОткрытии()
	
	// чтобы перейти к документам-начислениям нужно иметь права на обработку Анализ неявок, 
	// остальным пользователям показывать кнопку не будем
	РаботаСДиалогамиЗК.УстановитьВидимостьКнопкиОткрытьНачисления(ЭлементыФормы.ДействияФормы.Кнопки.Подменю2.Кнопки,"ДокументыНачисления");
	РаботаСДиалогамиЗК.УстановитьВидимостьКнопкиОткрытьНачисления(ЭлементыФормы.ДействияФормы.Кнопки.Подменю.Кнопки.Подменю2.Кнопки,"ДокументыНачисления");
	
	УстановитьЗаголовкиОрганизацийВФорме();
	
	РаботаСДиалогамиЗК.НастроитьОтборПоОрганизации(ЭтаФорма, "ДокументСписок");
	
КонецПроцедуры

Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	РаботаСДиалогамиЗК.ОбработкаОповещенияСпискаДокументов(ИмяСобытия, Параметр, Источник, ЭтаФорма, "ДокументСписок");
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ

Процедура ОрганизацияПриИзменении(Элемент)
	
	РаботаСДиалогамиЗК.ОбработкаИзмененияБыстрогоОтбораПоОрганизации(ЭтаФорма, Элемент, "ДокументСписок");

КонецПроцедуры

Процедура ДокументСписокПередНачаломДобавления(Элемент, Отказ, Копирование)
	
	РаботаСДиалогамиЗК.СписокДокументовПередНачаломДобавления(ЭтаФорма, Отказ, Копирование, Отбор.Организация.Значение, "ОтпускаОрганизаций");

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////

ДокументСписок.Колонки.Добавить("Организация");