////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ ОБЩЕГО НАЗНАЧЕНИЯ

Процедура ДействияФормыРедактироватьКод(Кнопка)
	МеханизмНумерацииОбъектов.ИзменениеВозможностиРедактированияНомера(ЭтотОбъект.Метаданные(), ЭтаФорма, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.Код);
КонецПроцедуры
// Процедура управляет доступностью элементов формы ИспользоватьПредметыПисем.
//
Процедура ДоступностьПредетовПисем()

	Если ТипЗнч(Владелец) <> Тип("СправочникСсылка.УчетныеЗаписиЭлектроннойПочты") Тогда
		ЭлементыФормы.ИспользоватьПредметыПисем.Доступность = Ложь;
	Иначе
		ЭлементыФормы.ИспользоватьПредметыПисем.Доступность = Владелец.ИспользоватьКлассификациюПисемПоПредметам;
	КонецЕсли;

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

// Процедура - обработчик события "ПриОткрытии" формы.
//
Процедура ПриОткрытии()
	
	ДоступностьПредетовПисем();
	
	МеханизмНумерацииОбъектов.ДобавитьВМенюДействияКнопкуРедактированияКода(ЭлементыФормы.ДействияФормы.Кнопки.Подменю);
	МеханизмНумерацииОбъектов.УстановитьДоступностьПоляВводаНомера(Метаданные(), ЭтаФорма, ЭлементыФормы.ДействияФормы.Кнопки.Подменю,ЭлементыФормы.Код);
КонецПроцедуры

// Процедура - обработчик события "ПослеЗаписи" формы.
//
Процедура ПослеЗаписи()
	
	ДоступностьПредетовПисем();
	МеханизмНумерацииОбъектов.ОбновитьПодсказкуКодНомерОбъекта(ЭтотОбъект.Метаданные(), ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.Код);
КонецПроцедуры

// Процедура - обработчик события "ОбновлениеОтображения" формы.
//
Процедура ОбновлениеОтображения()
	
	Если ЗначениеЗаполнено(Владелец) Тогда
		ЭтаФорма.Заголовок = ЭтаФорма.Заголовок + " (" + СокрЛП(Владелец) + ")"
	КонецЕсли; 
	
КонецПроцедуры