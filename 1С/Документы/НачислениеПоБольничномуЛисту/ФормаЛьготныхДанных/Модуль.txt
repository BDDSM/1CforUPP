Процедура ПриОткрытии()
	
	Если ТипЗнч(ВладелецФормы) = Тип("Форма") Тогда
		ТолькоПросмотр = ВладелецФормы.ТолькоПросмотр;
	КонецЕсли;
	
	ЭлементыФормы.ОграничениеПособия.ДоступныеЗначения.Добавить(Перечисления.ВидыОграниченияПособия.ОбщееОграничение);
	ЭлементыФормы.ОграничениеПособия.ДоступныеЗначения.Добавить(Перечисления.ВидыОграниченияПособия.ОграничениеВРазмереММОТ);
	ЭлементыФормы.ОграничениеПособияБезЛьгот1.ДоступныеЗначения.Добавить(Перечисления.ВидыОграниченияПособия.ОбщееОграничение);
	ЭлементыФормы.ОграничениеПособияБезЛьгот1.ДоступныеЗначения.Добавить(Перечисления.ВидыОграниченияПособия.ОграничениеВРазмереММОТ);
	ЭлементыФормы.ОграничениеПособияБезЛьгот2.ДоступныеЗначения.Добавить(Перечисления.ВидыОграниченияПособия.ОбщееОграничение);
	ЭлементыФормы.ОграничениеПособияБезЛьгот2.ДоступныеЗначения.Добавить(Перечисления.ВидыОграниченияПособия.ОграничениеВРазмереММОТ);

	ЭлементыФормы.ПанельДанных.ТекущаяСтраница = ?(ВыплатаЗаСчетФедеральногоБюджета = Перечисления.ВыплатыПособийЗаСчетФедеральногоБюджета.ЗачетНестраховыхПериодов, 
			ЭлементыФормы.ПанельДанных.Страницы.СтраницаОтставников, ЭлементыФормы.ПанельДанных.Страницы.СтраницаОблученных);
			
	Заголовок = ?(ВыплатаЗаСчетФедеральногоБюджета = Перечисления.ВыплатыПособийЗаСчетФедеральногоБюджета.ЗачетНестраховыхПериодов,
			"Данные расчета по страховому стажу без нестраховых периодов","Данные о применении льгот");
	
КонецПроцедуры

Процедура ОсновныеДействияФормыДействиеОК(Кнопка)
	Закрыть();
КонецПроцедуры

Процедура СтажЛетПриИзменении(Элемент)
	НачислениеПоБольничномуЛистуСервис.ОпределитьРазмерыПособияПоСтажу(ПричинаНетрудоспособности, СтажБезНестраховыхПериодовЛет, СтажБезНестраховыхПериодовСтажМесяцев, ПроцентОплатыБезЛьгот, ОграничениеПособияБезЛьгот)
КонецПроцедуры

Процедура СтажМесяцевПриИзменении(Элемент)
	НачислениеПоБольничномуЛистуСервис.ОпределитьРазмерыПособияПоСтажу(ПричинаНетрудоспособности, СтажБезНестраховыхПериодовЛет, СтажБезНестраховыхПериодовСтажМесяцев, ПроцентОплатыБезЛьгот, ОграничениеПособияБезЛьгот)
КонецПроцедуры

Процедура ПриИзмененииПроцентаОплаты()
	
	ВладелецФормы.ПриИзмененииПроцентаОплаты()
	
КонецПроцедуры

Процедура ПроцентОплатыПриИзменении(Элемент)
	
	ПриИзмененииПроцентаОплаты();

КонецПроцедуры

Процедура ПроцентОплатыРегулирование(Элемент, Направление, СтандартнаяОбработка)
	ТекущееЗначение = Элемент.Значение;
	Если Направление = 1 Тогда // увеличиваем значение
		Если ТекущееЗначение = 0 Тогда
			Элемент.Значение = 60;
			
		ИначеЕсли ТекущееЗначение = 60 Тогда
			Элемент.Значение = 80;
			
		ИначеЕсли ТекущееЗначение = 80 Тогда
			Элемент.Значение = 100;
			
		Иначе
			// далее увеличивать не будем
			
		КонецЕсли;
	Иначе // = -1 - уменьшаем значение
		Если ТекущееЗначение = 100 Тогда
			Элемент.Значение = 80;
			
		ИначеЕсли ТекущееЗначение = 80 Тогда
			Элемент.Значение = 60;
			
		Иначе
			// далее уменьшать не будем 
			
		КонецЕсли;
	КонецЕсли;
	СтандартнаяОбработка = Ложь;
	ПриИзмененииПроцентаОплаты();
КонецПроцедуры

Процедура ПроцентОплатыБезЛьготРегулирование(Элемент, Направление, СтандартнаяОбработка)
	ТекущееЗначение = Элемент.Значение;
	Если Направление = 1 Тогда // увеличиваем значение
		Если ТекущееЗначение = 0 Тогда
			Элемент.Значение = 60;
		ИначеЕсли ТекущееЗначение = 60 Тогда
			Элемент.Значение = 80;
		ИначеЕсли ТекущееЗначение = 80 Тогда
			Элемент.Значение = 100;
		Иначе
			// далее увеличивать не будем
		КонецЕсли;
	Иначе // = -1 - уменьшаем значение
		Если ТекущееЗначение = 100 Тогда
			Элемент.Значение = 80;
			
		ИначеЕсли ТекущееЗначение = 80 Тогда
			Элемент.Значение = 60;
			
		Иначе
			// далее уменьшать не будем 
			
		КонецЕсли;
	КонецЕсли;
	СтандартнаяОбработка = Ложь;
КонецПроцедуры

Процедура ОграничениеПособияПриИзменении(Элемент)
	
	ВладелецФормы.ОграничениеПособияПриИзменении(Элемент)
	
КонецПроцедуры // ОграничениеПособияПриИзменении()

Процедура ПрименятьЛьготыПриНачисленииПособияПриИзменении(Элемент)
	ВладелецФормы.ЭлементыФормы.ПанельПроцентовОграничений.ТекущаяСтраница = ?(ЗначениеЗаполнено(ВыплатаЗаСчетФедеральногоБюджета) И Не ПрименятьЛьготыПриНачисленииПособия, ВладелецФормы.ЭлементыФормы.ПанельПроцентовОграничений.Страницы.СтраницаОсобыйРасчет, ВладелецФормы.ЭлементыФормы.ПанельПроцентовОграничений.Страницы.СтраницаОбычныйРасчет);	
КонецПроцедуры